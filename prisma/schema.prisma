// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// Enums del flujo
enum Estado {
  SOLICITUD
  REVISION_TALLER
  APROBACION_COORD
  REPARACION_EN_CURSO
  ENTREGA
  COMPLETADA
}

enum DecisionCoord {
  APROBADO
  RECHAZADO
  ESPERA
}

enum EntregaSat {
  OK
  NO_CONFORME
}

model Solicitud {
  id                 String      @id
  createdAt          DateTime    @default(now())
  updatedAt          DateTime    @updatedAt

  // Básico (conductor)
  conductorNombre    String
  unidad             String
  placa              String
  necesidad          String

  // Estado de proceso
  estado             Estado      @default(SOLICITUD)

  // Taller – diagnóstico
  horaIngresoTaller  String?
  diagnosticoTaller  String?
  firmaTallerDiag    String?

  // Coordinación – decisión
  decisionCoord      DecisionCoord?
  motivoRechazo      String?
  firmaCoordAprob    String?

  // Reparación
  inicioReparacion   String?
  finReparacion      String?
  actividades        String?
  repuestos          String?
  responsableReparacion String?
  horaSalidaTaller   String?
  firmaReparacion    String?

  // Entrega
  entregaSatisfaccion EntregaSat?
  firmaEntregaConductor String?

  // Cierre
  firmaCoordFinal    String?
}
